{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{BrowserRouter as Router,Route,Routes,Navigate}from\"react-router-dom\";import LoginForm from\"./components/LoginForm\";import Sidebar from\"./components/Sidebar\";import Dashboard from\"./pages/Dashboard\";import Usuarios from\"./pages/Usuarios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// Estado para manejar la autenticación del usuario\nconst[isAuthenticated,setIsAuthenticated]=useState(false);const[usuarioRol,setUsuarioRol]=useState(null);// Almacena el rol del usuario\n// Función para manejar el login\nconst handleLogin=(token,rol)=>{localStorage.setItem(\"token\",token);// Guardamos el token\nlocalStorage.setItem(\"rol\",rol);// Guardamos el rol del usuario\nsetIsAuthenticated(true);setUsuarioRol(rol);};// Función para verificar si el usuario está autenticado\nuseEffect(()=>{const token=localStorage.getItem(\"token\");if(token){setIsAuthenticated(true);setUsuarioRol(localStorage.getItem(\"rol\"));}},[]);if(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(LoginForm,{onLogin:handleLogin})});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(Sidebar,{rol:usuarioRol}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1},children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/usuarios\",element:/*#__PURE__*/_jsx(Usuarios,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"})})]})})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Route","Routes","Navigate","LoginForm","Sidebar","Dashboard","Usuarios","jsx","_jsx","jsxs","_jsxs","App","isAuthenticated","setIsAuthenticated","usuarioRol","setUsuarioRol","handleLogin","token","rol","localStorage","setItem","getItem","children","onLogin","style","display","flex","path","element","to"],"sources":["C:/Users/MULTI/source/repos/MiAplicacionWeb/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Route, Routes, Navigate } from \"react-router-dom\";\r\nimport LoginForm from \"./components/LoginForm\";\r\nimport Sidebar from \"./components/Sidebar\";\r\nimport Dashboard from \"./pages/Dashboard\";\r\nimport Usuarios from \"./pages/Usuarios\";\r\n\r\nfunction App() {\r\n  // Estado para manejar la autenticación del usuario\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [usuarioRol, setUsuarioRol] = useState(null); // Almacena el rol del usuario\r\n\r\n  // Función para manejar el login\r\n  const handleLogin = (token, rol) => {\r\n    localStorage.setItem(\"token\", token);  // Guardamos el token\r\n    localStorage.setItem(\"rol\", rol);      // Guardamos el rol del usuario\r\n    setIsAuthenticated(true);\r\n    setUsuarioRol(rol);\r\n  };\r\n\r\n  // Función para verificar si el usuario está autenticado\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      setIsAuthenticated(true);\r\n      setUsuarioRol(localStorage.getItem(\"rol\"));\r\n    }\r\n  }, []);\r\n\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <div>\r\n        <LoginForm onLogin={handleLogin} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Router>\r\n      <div style={{ display: \"flex\" }}>\r\n        <Sidebar rol={usuarioRol} />\r\n        <div style={{ flex: 1 }}>\r\n          <Routes>\r\n            <Route path=\"/dashboard\" element={<Dashboard />} />\r\n            <Route path=\"/usuarios\" element={<Usuarios />} />\r\n            {/* Redirige a la página principal (dashboard) si no se encuentra la ruta */}\r\n            <Route path=\"/\" element={<Navigate to=\"/dashboard\" />} />\r\n          </Routes>\r\n        </div>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,aAAa,GAAI,CAAAC,MAAM,CAAEC,KAAK,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,kBAAkB,CACnF,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAC9C,MAAO,CAAAC,OAAO,KAAM,sBAAsB,CAC1C,MAAO,CAAAC,SAAS,KAAM,mBAAmB,CACzC,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb;AACA,KAAM,CAACC,eAAe,CAAEC,kBAAkB,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACkB,UAAU,CAAEC,aAAa,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAAE;AAEpD;AACA,KAAM,CAAAoB,WAAW,CAAGA,CAACC,KAAK,CAAEC,GAAG,GAAK,CAClCC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEH,KAAK,CAAC,CAAG;AACvCE,YAAY,CAACC,OAAO,CAAC,KAAK,CAAEF,GAAG,CAAC,CAAO;AACvCL,kBAAkB,CAAC,IAAI,CAAC,CACxBE,aAAa,CAACG,GAAG,CAAC,CACpB,CAAC,CAED;AACArB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAoB,KAAK,CAAGE,YAAY,CAACE,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIJ,KAAK,CAAE,CACTJ,kBAAkB,CAAC,IAAI,CAAC,CACxBE,aAAa,CAACI,YAAY,CAACE,OAAO,CAAC,KAAK,CAAC,CAAC,CAC5C,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,GAAI,CAACT,eAAe,CAAE,CACpB,mBACEJ,IAAA,QAAAc,QAAA,cACEd,IAAA,CAACL,SAAS,EAACoB,OAAO,CAAEP,WAAY,CAAE,CAAC,CAChC,CAAC,CAEV,CAEA,mBACER,IAAA,CAACT,MAAM,EAAAuB,QAAA,cACLZ,KAAA,QAAKc,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAH,QAAA,eAC9Bd,IAAA,CAACJ,OAAO,EAACc,GAAG,CAAEJ,UAAW,CAAE,CAAC,cAC5BN,IAAA,QAAKgB,KAAK,CAAE,CAAEE,IAAI,CAAE,CAAE,CAAE,CAAAJ,QAAA,cACtBZ,KAAA,CAACT,MAAM,EAAAqB,QAAA,eACLd,IAAA,CAACR,KAAK,EAAC2B,IAAI,CAAC,YAAY,CAACC,OAAO,cAAEpB,IAAA,CAACH,SAAS,GAAE,CAAE,CAAE,CAAC,cACnDG,IAAA,CAACR,KAAK,EAAC2B,IAAI,CAAC,WAAW,CAACC,OAAO,cAAEpB,IAAA,CAACF,QAAQ,GAAE,CAAE,CAAE,CAAC,cAEjDE,IAAA,CAACR,KAAK,EAAC2B,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEpB,IAAA,CAACN,QAAQ,EAAC2B,EAAE,CAAC,YAAY,CAAE,CAAE,CAAE,CAAC,EACnD,CAAC,CACN,CAAC,EACH,CAAC,CACA,CAAC,CAEb,CAEA,cAAe,CAAAlB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}